.\" Automatically generated by Pandoc 2.3.1
.\"
.TH "MATCHNAMES" "1" "Dec 27 2018" "taxon\-tools version 1.0" "Taxon\-tools manual"
.hy
.SH NAME
.PP
matchnames \- matches two lists of taxonomic names
.SH SYNOPSIS
.PP
matchnames \-a query_names_file \-b ref_names_file \-o outfile
.PD 0
.P
.PD
[ \-f [ \-e fuzzy_error ]] [ \-1 \-c \-n ]
.SH DESCRIPTION
.PP
Reconciling small variations in taxonomic names facilitates the
integration of biological names\-based data.
This tool matches a query list of (parsed) taxonomic names (List A)
against a reference list (List B), according to a set of taxonomic rules
(described below).
The taxonomic rules are most appropriate for plant names, as specified
by the International Code of Botanical Nomenclature.
Can also perform approximate (fuzzy) matching to identify variations
(e.g., misspelling) in binomial names and author strings.
An output status code is given for each type of match.
.SH OPTIONS
.TP
.B \-a
File name for input list A.
.RS
.RE
.TP
.B \-b
File name for input list B.
.RS
.RE
.TP
.B \-o
File name for output.
Deleted before each run, unless the append (\f[I]\-n\f[]) option is
given.
.RS
.RE
.TP
.B \-f
Use fuzzy matching with manual decision on names not automatically
matching.
.RS
.RE
.TP
.B \-e
Max Levenshtein distance to allow during fuzzy matching.
Default: 10 total insertions, deletions and substitutions.
.RS
.RE
.TP
.B \-1
If no author is given in list A and the name (without author) occurs
only once in list B, accept the name in list B as a match.
.RS
.RE
.TP
.B \-c
Allow a \[lq]canonical name\[rq] match if only the genus, species
epithet, and infraspecific epithet (if present) match exactly.
Default: to not allow such a match.
.RS
.RE
.TP
.B \-n
Append results to output file rather than deleting it before a run.
.RS
.RE
.SH FILE FORMATS
.SS Input file format
.PP
Each line represents the elements of a name.
Eight pipe\-delimited (\[lq]|\[rq]) fields per row: 1.
User ID code, 2.
Genus hybrid sign (\[lq]×\[rq] = Unicode \[lq]MULTIPLICATION SIGN\[rq]
\f[C]C3\ 97\f[]), 3.
Genus, 4.
Species hybrid sign (\[lq]×\[rq]), 5.
Specific epithet, 6.
Infraspecific rank signifier (\[lq]subsp.\[rq], \[lq]var.\[rq], etc.),
7.
Infraspecific epithet, 8.
Name's author string.
This parsing of names can be generated with the \f[B]parsenames\f[]
tool.
.SS Output file format
.PP
Each line represents a single name from the query list (list A).
Seventeen pipe\-delimited (\[lq]|\[rq]) fields per row: 1.
User ID code in list A, 2.
Code in list B (if matched), 3.
Match type (see codes below), 4\-10.
Parsed elements of name in list A.
11\-17 (in same format as name input), Parsed elements of name in list
B.
.SH MATCHING RULES AND OUTPUT CODES
.PP
For each name in List A a series of rules are applied in seeking a match
in List B.
The sequence of rules is:
.IP " 1." 4
Is there an exact match to all parts of the name (genus hybrid marker,
genus name, species hybrid marker, species epithet, infraspecific rank
signifier, infraspecific rank, author sting)?
If so match code is: \f[B]exact\f[].
.IP " 2." 4
Both query name and reference names are \[lq]de\-punctuated\[rq] to
remove the effect of mis\-matching spaces, periods, non\-ASCII author
name characters, etc.
The depunctuation procedure is: a) converting non\-ASCII characters into
their appropriate ASCII character (e.g., \[lq]ï\[rq] to \[lq]i\[rq]), b)
converting \[lq]and\[rq] or \[lq]et\[rq] into \[lq]&\[rq], c) removing
all punctuation other than \[lq](“, “)\[rq] and \[lq]&\[rq], d)
converting to lower\-case.
If an exact match exists between the depunctuated query string and a
depunctuated reference name, the match code is: \f[B]auto_punct\f[].
.IP " 3." 4
If the \f[B]\-1\f[] option has been specified, and if no author is given
in the list A name, and the name (without author) occurs only once in
list B, accept the name in list B automatically.
Match code: \f[B]auto_noauth\f[].
.IP " 4." 4
If one basionym is missing, a match is allowed (e.g., \f[I]Cardaminopsis
umbrosa\f[] Czerep.
vs.
\f[I]Cardaminopsis umbrosa\f[] (Turcz.) Czerep.).
Match code: \f[B]auto_basio+\f[], \f[B]auto_basio\-\f[].
(the +/\- indicating if the list A name is the one with (+), or without
(\-) the basionym.
.IP " 5." 4
If the names and author strings are the same after all \f[I]in\f[]
elements have been stripped, a match is allowed.
Match code: \f[B]auto_in+\f[], \f[B]auto_in\-\f[].
.IP " 6." 4
If the names and author strings are the same after all \f[I]ex\f[] and
\f[I]in\f[] elements have been stripped, a match is allowed (e.g.,
\f[I]Papaver nudicaule\f[] subsp.
\f[I]americanum\f[] Rändel vs.
\f[I]Papaver nudicaule\f[] subsp.
\f[I]americanum\f[] Rändel ex D.F.Murray).
Match code: \f[B]auto_exin+\f[], \f[B]auto_exin\-\f[].
.IP " 7." 4
If the names and author strings are the same after all \f[I]ex\f[] and
\f[I]in\f[] and basionym elements have been stripped, a match is
allowed.
Match code: \f[B]auto_basexin\f[].
.IP " 8." 4
If all elements of the name match except for the infraspecific rank,
record the match as: \f[B]auto_irank\f[].
.IP " 9." 4
If there are any reference names (list B) that may match the query name
approximately, move to \[lq]manual matching\[rq] (below).
Match code: \f[B]manual\f[], \f[B]manual?\f[] or \f[B]manual??\f[].
.IP "10." 4
If a name fails manual matching, but option \f[I]\-c\f[] has been given,
allow a match by \[lq]canonical form\[rq] only, i.e., genus plus
specific epithet plus infraspecific epithet (if present), not including
the infraspecific specifier (\[lq]subsp.\[rq], etc.).
Match code: \f[B]cfonly\f[].
.IP "11." 4
At this point, record a failure to match.
Match code: \f[B]no_match\f[].
.SH MANUAL MATCHING
.PP
If the manual/fuzzy matching option is given (\[lq]\-f\[rq]), and if no
automatic match is found, but if any approximate matches are found,
these are presented to the user for a \[lq]manual\[rq] choice to be
made.
.SS Commands during manual matching
.TP
.B 1\&...n
Accept this numbered entry as the match, with match code
\[lq]manual\[rq].
.RS
.RE
.TP
.B 1e\&...ne
(I.e., the number plus the \[lq]e\[rq] character) Accept this numbered
entry as the match, but add a medium\-confidence flag to match code:
\[lq]manual?\[rq].
.RS
.RE
.TP
.B 1ee\&...nee
(I.e., the number plus the \[lq]e\[rq] character) Accept this numbered
entry as the match, but add a low\-confidence flag to match code:
\[lq]manual??\[rq].
.RS
.RE
.TP
.B e
No listed option is acceptable.
Reject match.
.RS
.RE
.TP
.B c
See input codes of the names being offered.
.RS
.RE
.TP
.B q
Halt matching process.
The output file will contain only members of List A matched up to this
point.
.RS
.RE
.SS Suggested rules for manual matching
.PP
Accept a match at high confidence (\f[B]manual\f[]):
.IP "1." 3
Missing initials for an author, or different abbreviations of author's
surnames, in the author string,
.IP "2." 3
Spelling variation in genus, species or infraspecific epithets, with
(essentially) the same author.
.PP
Accept a match at medium confidence (\f[B]manual?\f[]):
.IP "1." 3
Author in one name is the \[lq]\f[I]ex\f[] author\[rq] in the other,
.IP "2." 3
Author string differs: 2nd author missing from a pair of authors (sep.
by \[lq]&\[rq] or \[lq]et.\[rq])
.IP "3." 3
Obviously incomplete author list in the author string
.PP
Accept a match at low confidence (\f[B]manual??\f[]):
.IP "1." 3
Same basionym, missing author,
.IP "2." 3
Same taxonomic name, different author initials,
.IP "3." 3
Same taxonomic name, missing first author in author string.
.PP
Reject the match (\f[B]no_match\f[]):
.IP "1." 3
When the two author strings are clearly representing different (sets of)
of authors.
.IP "2." 3
If the query name contains only the basionym author, and the reference
name has the basionym author plus the revising author, or vice versa.
.IP "3." 3
When the query name is of species rank and the reference name of
infraspecific rank, or vice versa.
.IP "4." 3
If the query name is followed by \[lq]auct.\[rq]
.SH SEE ALSO
.PP
\f[B]parsenames\f[](1), \f[B]parse_taxon_name\f[](3),
<https://en.wikipedia.org/wiki/Author_citation_(botany)>,
<http://alaskaflora.org/pages/blog3.html>
.SH AUTHOR
.PP
Cam Webb <cw@camwebb.info>
.SH COPYING PERMISSIONS
.PP
Due to the GPL license off the \f[C]gawkextlib\f[] dependency, this
program is released under the GPL 3.0.
.PP
Copyright © 2018, Campbell O.
Webb
.PP
Permission is granted to make and distribute verbatim copies of this
manual page provided the copyright notice and this permission notice are
preserved on all copies.
.PP
Permission is granted to copy and distribute modified versions of this
manual page under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.
.PP
Permission is granted to copy and distribute translations of this manual
page into another language, under the above conditions for modified
versions, except that this permission notice may be stated in a trans‐
lation approved by the Foundation.
